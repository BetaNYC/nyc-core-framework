/*

In this file:

// A. Variables
// B. Accordion Button
// C. Accordion Panel

*/

//////////////////////////////////////////////
// A. Variables
//////////////////////////////////////////////

$accordion-padding-x: var(--s3);
$accordion-padding-y: var(--s3);

$accordion-transition: 0.2s ease-out;

//////////////////////////////////////////////
// B. Accordion Button
//////////////////////////////////////////////

.accordion__button {
    position: relative;
    display: flex;
    justify-content: space-between;
    width: 100%;

    background-color: transparent;
    cursor: pointer;

    margin-bottom: 0;
    padding: $accordion-padding-y $accordion-padding-x;
    
    &:not(:first-child){
        border-top-width: var(--default-border-width);
        border-top-style: var(--default-border-style);
        border-top-color: inherit;
    }

    &::before {
        content: "";
        position: absolute;
        top: 0;
        right: 0;
        bottom: 0;
        left: 0;

        border-radius: inherit;
        background-color: currentColor;
        pointer-events: none;

        transition: opacity 0.5s;
        opacity: 0;
    }

    @extend .hover-focus;

    @include add-caret("after");

    &:not([aria-expanded="true"])::after {
        transition: transform $accordion-transition;
        transform: rotate(0deg);
    }

    &[aria-expanded="true"]{
        text-decoration: underline;

        &::before {
            opacity: 0.05;
        }

        &::after{
            transition: transform $accordion-transition;
            transform: rotate(180deg);
        }
    }
}

//////////////////////////////////////////////
// C. Accordion Panel
//////////////////////////////////////////////

.accordion__panel {
    overflow: hidden;

    transition: max-height $accordion-transition;

    &:not(.show){
        max-height: 0;
    }
    
    > [data-accordion="content"] {
        padding: $accordion-padding-y $accordion-padding-x;
    }
}