/*

In this file:

// A. Variables
// B. Common Form Elements
// C. Checkboxes and Radios
// D. Switches
// E. Form Feedback and Alerts

*/

//////////////////////////////////////////////
// A. Variables
//////////////////////////////////////////////

:root {
    --form-field-padding-x: 1em;
    --form-field-padding-y: .75em;
}

//////////////////////////////////////////////
// B. Basic Form Styles
//////////////////////////////////////////////

// General Selectors

select,
textarea,
input:not([type="radio"]):not([type="checkbox"]):not([type="file"]):not([type="range"]) {
    border: none;
    background-color: transparent;
    color: inherit;

    border-bottom-width: var(--default-border-width);
    border-bottom-style: var(--default-border-style);
    border-bottom-color: currentColor;
}

select option {
    color: currentColor;
}

button,
fieldset{
    border: none;
}

// Form Group

.form-group + .form-group {
    margin-top: var(--s4);
    margin-bottom: var(--s4);
}

[class*="form-group__field"] {
    --action-btn-size: 2.5rem;
    
    display: flex;
    
    @extend .subtle-fill;
    --subtle-fill-opacity: 0.05;
    color: inherit;
}

// Form Field Label

.field__label {
    pointer-events: none;
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    right: 0;

    &::after{
        content: "*";
        margin: auto 0.25rem;
        display: none;
    }
}

:required ~ .field__label::after {
    display: inline;
}

// Label and Input

.field__label,
.field__input {
    padding-top: var(--form-field-padding-y);
    padding-bottom: var(--form-field-padding-y);
    padding-right: var(--form-field-padding-x);
    padding-left: var(--form-field-padding-x);
    
    line-height: 1.5;
}
 
.field__input:focus, 
.field__input:active,
.has-value .field__input {
    padding-top: calc(var(--form-field-padding-y) * 1.5);
    padding-bottom: calc(var(--form-field-padding-y) * 0.5);
}

.field__input:focus + .field__label,
.field__input:active + .field__label,
.has-value .field__label{
    display: block;
    padding-top: calc( var(--form-field-padding-y) * 0.25 );
    padding-bottom: calc( var(--form-field-padding-y) * 0.25 );
    padding-left: 0;
    padding-right: 0;
    margin-left: var(--form-field-padding-x);
    margin-right: var(--form-field-padding-x);
    transform-origin: top left;
    transform: scale(0.65);

    [dir="rtl"] & {
        transform-origin: top right;
    }
}

// Form Group within Navigation

[class*="nav"] > li > form,
.primary-nav__menu > ul > li > form {
    
    .form-group {
        --form-field-padding-y: var(--nav--divider-padding-y);
        --form-field-padding-x: var(--nav--divider-padding-x);
    }

    .field__input{
        border: none;
    }

    .field__input:focus,
    .field__input:active,
    .field__input + .field__label,
    .has-value .field__input {
        padding-top: var(--form-field-padding-y);
        padding-bottom: var(--form-field-padding-y);
    }

    .field__input + .field__label{
        line-height: inherit;
        margin: unset;
        transform: unset;
    }

    .field__input:focus + .field__label, 
    .field__input:active + .field__label, 
    .has-value .field__label{
        display: none;
    }
}

/////////////////////////////

// Form Field

.goog-te-gadget, 
.goog-te-combo{
    font-family: inherit !important;
}

.goog-te-gadget{
    color: inherit !important;
    font-size: var(--font-size-md) !important;
    text-align: center;
    
    > div, 
    > div > .goog-te-combo,
    > span > a {
        color: currentColor !important;
    }

    > div{
        margin-bottom: var(--s1);

        @extend .subtle-fill;
        --subtle-fill-opacity: 0.05;
    }

    > div, 
    > div > .goog-te-combo{
        font-size: var(--font-size-rg) !important;
    }

    > div > .goog-te-combo {
        margin: 0 !important;
        padding: var(--form-field-padding-y) var(--form-field-padding-x);

        border-bottom-width: var(--default-border-width) !important;
        border-bottom-style: var(--default-border-style) !important;
        border-bottom-color: currentColor !important;
    }

}

.goog-te-gadget > div,
.field__input-wrap {
    position: relative;
    width: 100%;

    @include add-caret("after");

    &::after{
        pointer-events: none;
        position: absolute;
        right: 0;
        top: 50%;
        transform: translateY(-50%);
        margin-left: var(--s2);
        margin-right: var(--s2);
    }
}

.field__input-wrap::after {
    [dir="rtl"] & {
        right: unset;
        left: 0;
    }
}

.has-value select.field__input {
    font-size: 99.99%;
}

// Has Bitton


.form-group__field--has-btn {

    > .field__input {
        padding-right: calc( var(--form-field-padding-x) + var(--btn--icon-only-size) );
    }

    > .field__btn {

        @extend .btn !optional;
        @extend .btn--icon-only !optional;
        
        position: absolute;
        top: 50%;
        right: 0;
        transform: translatey(-50%);

        margin-left: calc(var(--form-field-padding-x) * 0.5);
        margin-right: calc(var(--form-field-padding-x) * 0.5);

    }

    [dir="rtl"] & {
        > .field__btn {
            right: unset;
            left: 0;
        }
         > .field__input {
            padding-right: var(--form-field-padding-x);
            padding-left: calc( var(--form-field-padding-x) + var(--btn--icon-only-size) );
        }
    }

}

// Field Assistance 

.form-group__assistance {
    margin-top: 0.5rem;
    padding-left: var(--form-field-padding-x);
    padding-right: var(--form-field-padding-x);
    opacity: 0.75;
    font-size: 75%;
}

//////////////////////////////////////////////
// C. Checkboxes and Radios
//////////////////////////////////////////////

// Checkbox, Radio Shared Styles

.form-group__radio,
.form-group__checkbox {
    position: relative;
    color: inherit;
    display: flex;
    align-items: baseline;
    padding-left: 1em;

    [dir="rtl"] & {
        padding-left: unset;
        padding-right: 1em;
    }
}

.form-group__radio > input[type="radio"],
.form-group__checkbox > input[type="checkbox"] {
    background-color: transparent;
    opacity: 0;
} 

//
// Make sure the label is only as wide as the
// inner text requires it to be.
//

.form-group__radio > input ~ .radio__label,
.form-group__checkbox > input ~ .checkbox__label {
    display: inline-block;
    line-height: var(--base-line-height);

    &::before {
        position: absolute;
        top: 0;
        left: 0;
        opacity: 0.5;

        @extend .fontAwesome !optional;
    }
}

// Unchecked

.form-group__checkbox > input ~ .checkbox__label::before{
    font-weight: 400;
    content: "\f0c8";
}

.form-group__radio > input ~ .radio__label::before{
    font-weight:  400;
    content: "\f111";
}

.form-group__checkbox > input:checked ~ .checkbox__label::before{
    font-weight: 900;
    content: "\f14a";
}

.form-group__radio > input:checked ~ .radio__label::before{
    font-weight: 900;
    content: "\f192";
}

//
// Defining States
//

.form-group__radio > input:focus ~ .radio__label,
.form-group__checkbox > input:focus ~ .checkbox__label {
    text-decoration: underline;
    &::before{
        opacity: 0.75;
    }
}

.form-group__radio > input:checked ~ .radio__label,
.form-group__checkbox > input:checked ~ .checkbox__label {
    &::before{
        opacity: 1;
    }
}

//////////////////////////////////////////////
// E. Form Feedback and Alerts
//////////////////////////////////////////////

[data-alert="form-errors"],
.form-group__feedback {
    display: none;
}

.invalid > .form-group__feedback{
    display: block;
}

.form-group__feedback {
    margin-bottom: var(--s2);

    strong {
        margin-left: 0.25rem;
        margin-right: 0.25rem;
    }
}


//////////////////////////////////////////////
// D. I.E. 11 Support
//////////////////////////////////////////////

@media screen and (-ms-high-contrast: active),
screen and (-ms-high-contrast: none) {

    div.goog-te-gadget {
        display: block !important;
    }
    
}