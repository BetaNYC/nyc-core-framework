<footer class="theme-primary font-size-md text-align-center" role="contentinfo">

    <h2 class="screen-reader-only">
        Page Footer
    </h2>

    <div class="container overflow-hidden">

        <div class="narrow margin-y-4">

            <p>
                <strong>NYC Core Framework</strong><br>
                Current version: 2.0 - Battery Park
            </p>

            <div class="margin-y-3">

                <a class="display-none margin-bottom-2" href="https://www1.nyc.gov" title="Go to nyc.gov" data-logo="brand">

                    <svg xmlns="http://www.w3.org/2000/svg" width="120" height="40" viewBox="0 0 120 40"
                       style="display: block;">
                       <g>
                           <polygon points="87.5 0 80 7.5 80 2.5 77.5 0 67.5 0 65 2.5 65 7.5 60 12.5 55 7.5 55 2.5 52.5 0 42.5 0 40 2.5 37.5 0 27.5 0 25 2.5 25 12.5 12.501 0 2.501 0 0 2.5 0 37.5 2.501 40 12.501 40 15 37.5 15 27.5 27.5 40 37.5 40 40 37.5 40 17.5 52.5 30 52.5 37.5 55 40 65 40 67.5 37.5 67.5 30 80 17.5 80 32.5 87.5 40 112.5 40 120 32.5 120 25 117.5 22 105 22 105 25 95 25 95 15 105 15 105 18 117.5 18 120 15 120 7.5 112.5 0 87.5 0" />
                           <path d="M117.9877,1.8787h.293l.4888.8088h.3522l-.53-.831a.4834.4834,0,0,0,.4927-.517c0-.3837-.2322-.5435-.6895-.5435h-.718V2.6875h.3105Zm0-.8182h.3758c.1867,0,.411.0278.411.2568,0,.2742-.2055.2962-.4385.2962h-.3483Z" />
                           <path d="M118.3265,3.42A1.6573,1.6573,0,0,0,120,1.71a1.6784,1.6784,0,1,0-3.3563,0A1.6456,1.6456,0,0,0,118.3265,3.42Zm0-3.1218A1.3255,1.3255,0,0,1,119.6342,1.71a1.3157,1.3157,0,1,1-2.6242,0A1.3271,1.3271,0,0,1,118.3265.2977Z" />
                       </g>
                   </svg>

                </a>

                <p class="margin-bottom-2">
                    &#169; 2020 - City of New York. All Rights Reserved. The NYC Core Framework is created and
                    maintained by NYC Information Technology and Telecommunications.
                </p>

                <ul class="nav nav--horizontal font-size-sm justify-content-center">
                    <li>
                        <a class="text-reset" href="http://www1.nyc.gov/home/privacy-policy.page">
                            Privacy Policy
                        </a>
                    </li>
                    <li>
                        <a class="text-reset" href="http://www1.nyc.gov/home/terms-of-use.page">
                            Terms of Use
                        </a>
                    </li>
                </ul>

            </div>
            <!-- .margin-y-3 -->

        </div>

    </div>
    <!-- .container -->

    <div class="container padding-y-2 border-top">
        <a href="#" data-scroll="top">
            Back to Top
        </a>
    </div>

</footer>

<script src="https://cdn.jsdelivr.net/gh/CityOfNewYork/nyc-core-framework@new-version/dist/js/nyc_core.js"></script>

{% if page.title == 'Home' %}  
<script src="{{ site.baseurl }}/dist/js/home.js"></script>
{% endif %}

{% if page.url contains '/documentation' or '/templates' %}
<script src="{{ site.baseurl }}/lib/js/prism.js"></script>
<script src="{{ site.baseurl }}/dist/js/iframe_height.js"></script>

{% endif %}

{% if page.title == 'Customization' %}

<script defer>

    const customPropButtonList = document.querySelectorAll('[data-clipboard]');

    for (const customPropButton of customPropButtonList) {

        let myButtonText = customPropButton.innerHTML.trim().replace(/&nbsp;/g, '');

        const resetButton = () => {
        
            for (otherButtons of customPropButtonList){
                otherButtons.innerHTML = myButtonText;
            }
        
        }

        customPropButton.addEventListener('click', function (event) {

            event.preventDefault();

            let currentRow = event.target.closest('tr');

            let myCustomPropertyName = currentRow.querySelector('[data-prop]').innerHTML.trim().replace(/&nbsp;/g, '');
            let myCustomPropertyValue = currentRow.querySelector('[data-val]').innerHTML.trim().replace(/&nbsp;/g, '');

            let myClipboardText = myCustomPropertyName + ':' + ' ' + myCustomPropertyValue + ';';
            
            resetButton();

            if( myClipboardText ){
                event.target.innerHTML = 'Copied!';
            }

            // Create an auxiliary hidden input
            var aux = document.createElement( 'input' );

            // Get the text from the element passed into the input
            aux.setAttribute( 'value', myClipboardText );

            // Append the aux input to the body
            document.body.appendChild(aux);

            // Highlight the content
            aux.select();

            // Execute the copy command
            document.execCommand( 'copy' );

            // Remove the input from the body
            document.body.removeChild(aux);

        });
    
        document.addEventListener("accTrigger", function (e) {
            resetButton();
        }, false);
    }

</script>

{% endif %}

{% if page.title == 'NYC Core Icons' %}

<script defer src="https://i.icomoon.io/public/395bc97f45/NYCCoreIcons/svgxuse.js"></script>

<script>

    const coreIconsData = "https://i.icomoon.io/public/395bc97f45/NYCCoreIcons/selection-svg.json";
    const searchBar = document.getElementById('core-icon-search');
    const coreIconsGrid = document.getElementById("coreIconsGrid");

    let coreIconsArray = [];

    searchBar.addEventListener('keyup', (event) => {
        const searchString = event.target.value.toLowerCase();
        const filteredIcons = coreIconsArray.filter((iconArray) => {
            return (
                iconArray.properties.name.toLowerCase().includes(searchString) ||
                iconArray.icon.tags.toString().includes(searchString)
            );
        });

        displayIcons(filteredIcons);        
    });

    const loadCoreIcons = async () => {
        try {
            const response = await fetch(coreIconsData);
            const coreIconData = await response.json();

            coreIconsArray = coreIconData.icons;
            displayIcons(coreIconsArray);
        
        } catch (err) {
            console.error(err);
        }
    };
    
    const displayIcons = (icons) => {

        const iconHTML = icons.map((iconArray) => {

            console.log("iconArray = ", iconArray);
            // let tags = iconArray.icon.tags;

            let name = iconArray.properties.name;
            let tags = iconArray.icon.tags;
            let paths = iconArray.icon.paths;

            console.log("iconTags = ", tags);
            console.log("iconPaths = ", paths);

            let svgPaths = paths.map((path) => {
                return `<path d="${path}"/>`;
            }).join('');


            console.log("svgPaths = ", svgPaths);

            return `
            <div class="grid__cell">
                <div class="aspect-ratio--1by1 border margin-bottom-1">
                    <div class="aspect-ratio__content display-flex justify-content-center align-items-center">
                        <svg class="nyc_icon_${name}" style=": 24px; fill: currentColor; display: none;">
                            <use xlink:href="#nyc_icon_${name}"></use>
                        </svg>
                        <span class="nyc_icon_${name}" style="font-size: 2.5em !important;"></span>
                    </div>
                </div>
                <p class="font-size-md">
                    ${name}
                </p>
            </div>
            `;
        }).join('');

        coreIconsGrid.innerHTML = iconHTML;
    };

    loadCoreIcons();

</script>

{% endif %}